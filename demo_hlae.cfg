// ══════════════════════════════════════════════════════════════════
//       ____           ____             ____   _____    ____
//      / ___|   _ __  |  _ \           / ___| |  ___|  / ___|
//      \___ \  | '__| | |_) |  _____  | |     | |_    | |  _
//       ___) | | |    |  __/  |_____| | |___  |  _|   | |_| |
//      |____/  |_|    |_|              \____| |_|      \____|
// ══════════════════════════════════════════════════════════════════
// 文档地址：https://doc.srprolin.top/posts/SrP-CFG_CS2/srpcfg-1.html

// ─────────────────────────  HLAE设置 ─────────────────────────────────
sv_cheats                   1          // 开启作弊
cl_show_observer_crosshair  0          // 显示玩家所用准星 <0.否 1.好友及队友 2.所有人>
cl_clock_correction         0          // 修复demo卡顿
tv_listen_voice_indices    -1          // 开启玩家语音
tv_listen_voice_indices_h  -1          // 玩家语音32bit
mirv_campath enabled        1          // 开启镜头运动
mirv_input fov              90         // 默认运镜FOV
mirv_reshade enabled 1                 // 开启ReShade
mirv_streams record campath 1          // 开启录制时记录镜头路径
// 默认录制文件位置：...\common\Counter-Strike Global Offensive\game\bin\win64\untitled_rec
// mirv_streams record name "F:\Replays" // 更改录制文件位置(修改为你的路径，并将该行最前方的双斜杠//删除)

// ─────────────────────────  HLAE录制  ─────────────────────────────────
engine_no_focus_sleep 0         // 窗口失焦/在后台时不掉帧
mirv_streams record screen enabled 1  // 启用屏幕录制流
mirv_streams record startMovieWav 1  // 开始录制时同时录制WAV音频
mirv_streams record fps 1080    // 录制帧率设置为1080
// ───── 注意请确保HLAE目录下有FFmpeg工具,此为默认路径:"C:\Program Files (x86)\HLAE\ffmpeg" ──────

//  ─────────────────────────  Adam动态动态模糊核心配置  ──────────────────────────────────
// 1. 添加FFmpeg编码器（确保动态模糊输出格式）
mirv_streams settings add ffmpeg mp4 "-c:v libx264 -pix_fmt yuv420p -preset ultrafast -crf 9 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
// 2. 创建模糊采样器并配置参数
mirv_streams settings add sampler blur                  // 添加模糊采样器
mirv_streams settings edit blur settings mp4            // 绑定输出格式为MP4
mirv_streams settings edit blur strength 1              // 模糊强度（1=轻微，2=中等，数值越大越模糊）
mirv_streams settings edit blur method rectangle        // 模糊算法（rectangle=矩形模糊，性能较好）
mirv_streams settings edit blur exposure 0.7            // 模糊量（0.5-1.0为宜，数值越大模糊范围越广）
mirv_streams settings edit blur fps 60                  // 模糊流输出帧率（需与录制帧率匹配）
// 3. 应用模糊设置（默认开启动态模糊）
mirv_streams record screen settings blur
// 4. 控制台命令
alias bluron "mirv_streams record fps 1080;mirv_streams record screen settings blur;echo 动态模糊开启!" //动态模糊:18倍原生帧率压制
alias bluroff "mirv_streams record fps 60;mirv_streams record screen settings mp4;echo 动态模糊关闭!" //原生60帧录制

// ─────────────────────────  按键绑定  ──────────────────────────────────
binddefaults;                                            // 重置所有按键
bind q "demoui"                                          // Q 打开/关闭 demoui
bind p "demo_togglepause";                               // P 切换demo暂停/继续
bind mouse3   "demo_togglepause";                        // 鼠标滚轮中键 切换demo暂停/继续
bind h "toggle cl_draw_only_deathnotices";               // H 只保留准星与击杀
bind k "toggle voice_enable;toggle voice_caster_enable"; // K 开关CSGO语音
bind ' "toggle tv_listen_voice_indices -1 0"             // ' 开关CS2玩家语音
bind v "toggle crosshair";                               // V 隐藏准心
bind b "toggle cl_drawhud";                              // B 隐藏所有hud包括击杀
bind n "incrementvar cl_drawhud_force_radar -1 1 1";     // N 开关雷达 1=强制开 0=自动 -1=强制关
bind "ralt" "toggle cl_teamid_overhead_mode 1 3"         // 切换队友头顶标识模式(将冲突按键功能重新绑定)
bind m "toggle host_timescale";                          // M 开关声音
bind t "mirv_input camera;echo 已进入运镜模式，按Esc退出使路径生效";// T 镜头摆放模式 [ESC退出]
bind y "demo_marktick";                                  // Y 标记当前tick
bind u "demo_gotomark";                                  // U 跳转标记
bind , "demo_goto -5s relative";                         // [ 快退5s
bind . "demo_goto 5s relative";                          // ] 快进5s
bind [ "mirv_campath edit start delta+0.25";             // [ 运镜时间回退0.25s
bind ] "mirv_campath edit start delta-0.25";             // ] 运镜时间快进0.25s
bind F5       "mirv_cmd addTick rec";                    // F5  设置当前Tick开始录制
bind F6       "mirv_cmd addTick rec_end";                // F6  设置当前Tick结束录制
bind F7       "mirv_cmd print";                          // F7  打印mirv_cmd信息
bind F8       "mirv_cmd clear;echo >>> Cleared!";        // F8  清除所有mirv_cmd指令
bind capslock "mirv_campath add; echo 已添加机位"          // Capslock 添加镜头/机位
bind ins      "mirv_campath print"                        // Insert   打印运镜信息
bind del      "mirv_campath clear; echo 已清除所有机位";    // Delete   删除所有镜头
bind kp_1      "mirv_campath remove 1"                   // 小键盘1 移除1号机位
bind kp_2      "mirv_campath remove 2"                   // 小键盘2 移除2号机位
bind kp_3      "mirv_campath remove 3"                   // 小键盘3 移除3号机位
bind kp_4      "mirv_campath remove 4"                   // 小键盘4 移除4号机位
bind kp_5      "mirv_campath remove 5"                   // 小键盘5 移除5号机位
bind kp_6      "mirv_campath remove 6"                   // 小键盘6 移除6号机位
bind kp_7      "mirv_campath remove 7"                   // 小键盘7 移除7号机位
bind kp_8      "mirv_campath remove 8"                   // 小键盘8 移除8号机位
bind kp_9      "mirv_campath remove 9"                   // 小键盘9 移除9号机位
bind kp_0      "mirv_campath remove 0"                   // 小键盘0 移除0号机位

// 实现 HLAE录制
bind uparrow   "rec;demo_resume;checkSetting";           // ↑ hlae录制开始并显示通道、帧率设置
bind downarrow "rec_end;demo_pause";                     // ↓ hlae录制结束
alias rec          "demo_timescale 1; fps_max 0; echo >>> HLAE录制开始; mirv_streams record start";
alias rec_end      "mirv_streams record end; echo >>> HLAE录制结束";
alias checkSetting "echo;echo [当前录制FPS]; mirv_streams record fps; echo";

// 实现 镜头激活开关
bind i "campath"                                         // I 镜头激活开关
alias campath	"campath_on"
alias campath_on	"mirv_campath enabled 1;alias campath campath_off;echo >>> 摄像机功能已开启√"
alias campath_off	"mirv_campath enabled 0;alias campath campath_on;echo >>> 摄像机功能已关闭×"
campath_on; // 默认开启镜头激活

// 实现 镜头轨迹显示开关
bind o "campath_draw"                                    // O 镜头轨迹显示开关
alias campath_draw	"campath_draw_on"
alias campath_draw_on "mirv_campath draw enabled 1;alias campath_draw campath_draw_off;echo >>> 摄像机路径显示已开启√"
alias campath_draw_off "mirv_campath draw enabled 0;alias campath_draw campath_draw_on;echo >>> 摄像机路径显示已关闭×"
campath_draw_on;  // 默认开启镜头轨迹显示

// 实现 独显击杀信息（当前观察玩家）
bind j "dmsg"                                            // J 独显击杀信息（当前观察玩家） | 关闭时清空所有信息
alias dmsg dmsg_on
alias dmsg_on  "alias dmsg dmsg_off; mirv_deathmsg filter add attackerMatch=!Trace block=1; mirv_deathmsg lifetime 90; echo >>> 独显击杀信息（当前观察玩家）已开启√"
alias dmsg_off "alias dmsg dmsg_on;  mirv_deathmsg filter clear; mirv_deathmsg lifetime default; mirv_deathmsg clear ; echo >>> 独显击杀信息已关闭×"

// 实现 切换屏蔽击杀信息（展示时间修改为0）
bind \ "block"                                           // \ 切换击杀信息显示
alias block    "blockOn";
alias blockOn  "alias block blockOff; mirv_deathmsg lifetime 0; echo [屏蔽击杀信息]";
alias blockOff "alias block blockOn;  mirv_deathmsg lifetime default; echo [击杀信息已恢复默认时间]";

// 实现 切换广角
bind = "widefov"                                         // = 切换广角FOV
alias widefov    "widefovOn";
alias widefovOn  "alias widefov widefovOff; mirv_fov 105; echo [已开启广角fov]"
alias widefovOff "alias widefov widefovOn;  mirv_fov default; echo [已还原默认fov]"

// 实现 前后侧键 +-播放速度 10% 20% 25% 100% 400% 800% 1600%
bind mouse5   "gear_up"                                  // 前侧键 +播放速度
bind mouse4   "gear_down"                                // 后侧键 -播放速度
alias gear_up 	"gear4"
alias gear_down "gear14"
alias gear110   "demo_timescale 0.1; alias gear_up gear15;alias gear_down gear110;echo [Demo播放速度];echo X0.1"
alias gear15 	  "demo_timescale 0.2; alias gear_up gear14;alias gear_down gear110;echo [Demo播放速度];echo X0.2"
alias gear14	  "demo_timescale 0.25;alias gear_up gear1; alias gear_down gear15 ;echo [Demo播放速度];echo X0.25"
alias gear1     "demo_timescale 1;   alias gear_up gear4; alias gear_down gear14 ;echo [Demo播放速度];echo X1"
alias gear4     "demo_timescale 4;   alias gear_up gear8; alias gear_down gear1  ;echo [Demo播放速度];echo X4"
alias gear8     "demo_timescale 8;   alias gear_up gear8; alias gear_down gear4  ;echo [Demo播放速度];echo X8"
alias gear16    "demo_timescale 16;  alias gear_up gear16; alias gear_down gear8 ;echo [Demo播放速度];echo X16"

// 帮助
bind l "mirv_deathmsg help players; mute_hint"           // L 查看玩家信息和语音屏蔽提示 name=名称 | userid=用户id | xuid=用户64位id | speckey=观察切换按键
alias mute_hint "echo [用户id=userid那一列数字];echo 禁用玩家语音 → voice_mute player#用户id;echo 取消所有禁用 → voice_unmute all; echo 如: voice_mute player#9;echo;echo 便捷指令: m1 m2 ... m14 | 取消屏蔽: um"
alias um  "voice_unmute all"
alias m1  "voice_mute player#1 ; echo -玩家#1"
alias m2  "voice_mute player#2 ; echo -玩家#2"
alias m3  "voice_mute player#3 ; echo -玩家#3"
alias m4  "voice_mute player#4 ; echo -玩家#4"
alias m5  "voice_mute player#5 ; echo -玩家#5"
alias m6  "voice_mute player#6 ; echo -玩家#6"
alias m7  "voice_mute player#7 ; echo -玩家#7"
alias m8  "voice_mute player#8 ; echo -玩家#8"
alias m9  "voice_mute player#9 ; echo -玩家#9"
alias m10 "voice_mute player#10; echo -玩家#10"
alias m11 "voice_mute player#11; echo -玩家#11"
alias m12 "voice_mute player#12; echo -玩家#12"
alias m13 "voice_mute player#13; echo -玩家#13"
alias m14 "voice_mute player#14; echo -玩家#14"

// 基础设置
r_show_build_info          0   // 关闭版本信息
r_fullscreen_gamma         2.4 // 固定亮度不一致 伽马=2.4
fog_override               1   // 视野更清晰
mp_display_kill_assists    0   // 不显示助攻
cl_showpos                 0   // 不显示位置
hud_showtargetid           0   // 隐藏目标id
engine_no_focus_sleep      0   // 窗口失焦/在后台时不掉帧
mirv_cvar_unhide_all           // 解除隐藏控制台变量CVar
demo_pause                     // 暂停demo
cl_hud_telemetry_frametime_show       0  // 显示帧生成时间及FPS <0.从不 1. 如果条件恶劣 2.总是>
cl_hud_telemetry_net_misdelivery_show 0  // 显示丢包/发送错误率LOSS <0.从不 1. 如果条件恶劣 2.总是>
cl_hud_telemetry_ping_show            0  // 显示延迟 <0.从不 1. 如果条件恶劣 2.总是>
cl_grenadecrosshair_decoy          0     // 是否显示诱饵弹准星，默认关闭
cl_grenadecrosshair_explosive      0     // 是否显示雷准星，默认关闭
cl_grenadecrosshair_fire           0     // 是否显示燃烧弹准星，默认关闭
cl_grenadecrosshair_flash          0     // 是否显示闪光弹准星，默认关闭
cl_grenadecrosshair_smoke          0     // 是否显示烟雾弹准星，默认关闭
cl_teamcounter_playercount_instead_of_avatars 0     //显示对局头像

// HUD
cl_hud_color             0        // 颜色
cl_radar_always_centered 1        // 雷达以玩家为中心
cl_radar_scale           0.45     // 雷达缩放
cl_hud_radar_scale       1        // 雷达大小（0.8-1.3）
cl_radar_icon_scale_min  0.6      // 雷达人物标点大小
cl_radar_rotate          1        // 雷达旋转
hud_showtargetid         0        // 隐藏目标id

// 准星
cl_crosshair_drawoutline "0"
cl_crosshair_dynamic_maxdist_splitratio "0.300000"
cl_crosshair_dynamic_splitalpha_innermod "1"
cl_crosshair_dynamic_splitalpha_outermod "0.5"
cl_crosshair_dynamic_splitdist "7"
cl_crosshair_friendly_warning "1"
cl_crosshair_outlinethickness "0.5"
cl_crosshair_sniper_width "1"
cl_crosshair_t "0"
cl_crosshairalpha "255"
cl_crosshaircolor "1"
cl_crosshaircolor_b "50"
cl_crosshaircolor_g "250"
cl_crosshaircolor_r "50"
cl_crosshairdot "0"
cl_crosshairgap "-0.500000"
cl_crosshairgap_useweaponvalue "0"
cl_crosshairsize "3.500000"
cl_crosshairstyle "4"
cl_crosshairthickness "1.000000"
cl_crosshairusealpha "1"
cl_fixedcrosshairgap "3"
cl_crosshair_recoil 0

// 持枪视角
viewmodel_fov 62;
viewmodel_offset_x 2.5;
viewmodel_offset_y 2;
viewmodel_offset_z -2;
viewmodel_presetpos 0;

// 实现 切换助攻显示
alias ass   "toggle mp_display_kill_assists; echo [切换助攻显示]"

// 实现 关闭游戏设置中的MVP、回合开始结束、无线电等声音（包括小鸡声音）
alias mute "snd_menumusic_volume 0; snd_roundstart_volume 0;snd_roundend_volume 0;snd_roundaction_volume 0;snd_mapobjective_volume 0;snd_tensecondwarning_volume 0;snd_deathcamera_volume 0;snd_mvp_volume 0;snd_mute_mvp_music_live_players 1;snd_mute_losefocus 0;; echo [关闭各项声音]";

// 实现 解决运镜模式键位冲突
alias t "unbind uparrow; unbind downarrow; unbind leftarrow; unbind rightarrow; unbind pgup; unbind pgdn; unbind -; unbind =; echo >>> 已解绑运镜冲突按键;";

// 实现 运镜模式FOV切换指令
alias f100 "mirv_input fov 100";alias f95 "mirv_input fov 95";alias f90 "mirv_input fov 90";alias f85 "mirv_input fov 85";
alias f80 "mirv_input fov 80";alias f75 "mirv_input fov 75";alias f70 "mirv_input fov 70";alias f65 "mirv_input fov 65";
alias f60  "mirv_input fov 60";alias f55 "mirv_input fov 55";alias f50 "mirv_input fov 50";alias f45 "mirv_input fov 45";
alias f40 "mirv_input fov 40";alias f35 "mirv_input fov 35";alias f30 "mirv_input fov 30";alias f25 "mirv_input fov 25";
alias f20 "mirv_input fov 20";alias f15 "mirv_input fov 15";alias f10 "mirv_input fov 10";

// 实现 运镜时间/位置修改为当前点
alias pos  "mirv_campath edit position current" // 修改运镜起始位置为当前点
alias time "mirv_campath edit start"            // 修改运镜起始时间为当前Tick

// 实现 切换后处理滤镜
alias post "toggle r_csgo_postprocess_enable; echo [切换后处理滤镜]"

// 实现 切换对局头像/数字显示
alias avatars "cl_teamcounter_playercount_instead_of_avatars 0;echo 显示对局头像!"
alias numbers "cl_teamcounter_playercount_instead_of_avatars 1;echo 显示对局数字!"

// 实现 demo下方小字提示是否显示
alias noshow "cl_spec_show_bindings 0;echo 屏蔽小字!"
alias show "cl_spec_show_bindings 1;echo 显示小字!"

// ─────────────────────────  输出控制台提示  ──────────────────────────────────
echo ══════════════════════════════════════════════════════════════════
echo       ____           ____             ____   _____    ____
echo      / ___|   _ __  |  _ \           / ___| |  ___|  / ___|
echo      \___ \  | '__| | |_) |  _____  | |     | |_    | |  _
echo       ___) | | |    |  __/  |_____| | |___  |  _|   | |_| |
echo      |____/  |_|    |_|              \____| |_|      \____|
echo ══════════════════════════════════════════════════════════════════
echo 文档地址："https://doc.srprolin.top/posts/SrP-CFG_CS2/srpcfg-1.html"
echo demo_hlae Enabled!
echo ═════════════════════════════════════════════════════════════════════
echo ──────────────────────!!!重要提示!!!──────────────────────────
echo 正如文件名所示，你需要通过HLAE启动游戏，并正确配置FFmpeg，否则，部分功能将无法使用。
echo ────────────────────────  控制台指令  ────────────────────────────
echo ──── 开启/关闭 动态模糊录制	:  bluron | bluroff
echo ──── 关闭BGM/MVP/无线电声音	:  mute
echo ──── 解绑运镜模式键位冲突	:  t
echo ──── 切换助攻显示		:  ass
echo ──── 切换后处理滤镜 [开局灰色]	:  post
echo ──── 修改运镜起始位置为当前点	:  pos
echo ──── 修改运镜起始时间为当前Tick	:  time
echo ──── 运镜模式下修改FOV		:  f10 | f15 | ... | f100
echo ──── 显示对局头像/数字		:  avatars | numbers
echo ──── 是否显示下方小字提示		:  show | noshow
echo ────────────────────────  快捷键  ───────────────────────────────
echo ──── 打开/关闭demoui        	:  Q
echo ──── 镜头摆放模式 [ESC]退出   	:  T
echo ──── 标记当前Tick           	:  Y
echo ──── 跳转标记             	:  U
echo ──── 镜头激活开关        	:  I
echo ──── 镜头轨迹显示    		:  O
echo ──── demo暂停/继续          	:  P 或 鼠标中键（mouse3）
echo ─────────────────────────────────────────────────────────────
echo ──── HUD只保留准星和击杀    	:  H
echo ──── 独显击杀信息 @当前观察玩家	:  J  关闭时清空所有信息
echo ──── 开关CSGO语音      		:  K
echo ──── 查看玩家信息和语音屏蔽提示	:  L  用户id/xuid/观察按键
echo ──── 开关CS2玩家语音 		:  '
echo ──── 切换队友头顶标识模式 		:  ralt
echo ─────────────────────────────────────────────────────────────
echo ──── x光       	   	:  X
echo ──── 准心开关      		:  V
echo ──── 开关HUD      		:  B
echo ──── 开关雷达      		:  N
echo ──── 静音           	 	:  M
echo ──── 快退5s      		:  ,
echo ──── 快进5s       		:  .
echo ──── 运镜时间回退0.25s    	:  [
echo ──── 运镜时间快进0.25s    	:  ]
echo ──── 切换击杀信息显示   	:  \
echo ──── 切换广角FOV       	:  =
echo ─────────────────────────────────────────────────────────────
echo ──── 打开/关闭demoui		:  Shift+F2
echo ──── 添加镜头      		:  Capslock
echo ──── 清空镜头      		:  Delete
echo ──── +播放速度      		:  前侧键（mouse5）
echo ──── -播放速度      		:  后侧键（mouse4）
echo ─────────────────────────────────────────────────────────────
echo ──── 开始HLAE录制  		:  ↑
echo ──── 结束HLAE录制  		:  ↓
echo ──── 设置当前Tick开始录制    	:  F5
echo ──── 设置当前Tick结束录制    	:  F6
echo ──── 打印mirv_cmd信息        	:  F7
echo ──── 清除所有mirv_cmd指令    	:  F8
echo ═════════════════════════════════════════════════════════════