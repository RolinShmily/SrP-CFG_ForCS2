<Window x:Class="SrPInstaller.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SrP-CFG å®‰è£…å™¨" Height="800" Width="800"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <Image x:Name="AppIconImage" Width="32" Height="32" Margin="0,0,10,0" VerticalAlignment="Center"
                   Source="/Resources/app.ico" Stretch="Uniform"
                   Visibility="Visible"/>
            <TextBlock VerticalAlignment="Center">
                <Run Text="SrP-CFG å®‰è£…å™¨ v2" FontSize="22" FontWeight="Bold"/>
                <Run Text=" | " FontSize="16" Foreground="#999"/>
                <Hyperlink NavigateUri="https://blog.srprolin.top/posts/srp-cfg/#srp-cfg_forcs2" RequestNavigate="Hyperlink_RequestNavigate" Foreground="#0078D4" FontSize="14">
                    <Run Text="é¡¹ç›®åšå®¢åœ°å€" TextDecorations="None"/>
                </Hyperlink>
            </TextBlock>
        </StackPanel>

        <!-- Options -->
        <StackPanel Grid.Row="1" Margin="0,0,0,15">
            <CheckBox x:Name="InstallCfgCheckBox" IsChecked="True" Content="å®‰è£… CFG æ–‡ä»¶ï¼ˆå…¨å±€é…ç½®ï¼‰" />
            <Grid Margin="25,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="ç›®æ ‡è·¯å¾„:" VerticalAlignment="Center" FontSize="12"/>
                <TextBox Grid.Column="1" Text="{Binding Cs2CfgPath, Mode=OneWay, TargetNullValue='è¯·ç‚¹å‡»åˆ·æ–°è·¯å¾„æ£€æµ‹æˆ–æ‰‹åŠ¨é€‰æ‹©'}" IsReadOnly="True" TextWrapping="Wrap"
                         Height="30" VerticalContentAlignment="Center"/>
                <Button Grid.Column="2" x:Name="SelectCfgFolderButton" Content="..." Padding="10,3" Margin="5,0,0,0"
                        Click="SelectCfgFolderButton_Click" Width="40" Height="30"/>
            </Grid>
            <Grid Margin="25,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="å¤‡ä»½ä½ç½®:" VerticalAlignment="Center" FontSize="12"/>
                <TextBox Grid.Column="1" x:Name="CfgBackupTextBox" IsReadOnly="True" TextWrapping="Wrap"
                         Height="30" VerticalContentAlignment="Center" Text="{Binding CfgBackupPath, Mode=OneWay, TargetNullValue='å®‰è£…å‰å°†è‡ªåŠ¨å¤‡ä»½'}"/>
                <Button Grid.Column="2" x:Name="OpenCfgBackupButton" Content="æ‰“å¼€æ–‡ä»¶å¤¹" Padding="8,3" Margin="5,0,0,0"
                        Click="OpenCfgBackupButton_Click" Height="30"/>
            </Grid>

            <CheckBox x:Name="InstallVideoCheckBox" IsChecked="True" Content="å®‰è£… è§†é¢‘é¢„è®¾æ–‡ä»¶ï¼ˆç”¨æˆ·é…ç½®ï¼‰" Margin="0,10,0,0"/>
            <Grid Margin="25,0,0,5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="Steam ç”¨æˆ·:" VerticalAlignment="Center" FontSize="12"/>
                <ComboBox x:Name="SteamUserComboBox" Grid.Row="0" Grid.Column="1" SelectionChanged="SteamUserComboBox_SelectionChanged"
                          Height="30"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="ç›®æ ‡è·¯å¾„:" VerticalAlignment="Center" FontSize="12" Margin="0,5,0,0"/>
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding VideoCfgPath, Mode=OneWay, TargetNullValue='è¯·é€‰æ‹© Steam ç”¨æˆ·'}" IsReadOnly="True"
                         TextWrapping="Wrap" Height="30" VerticalContentAlignment="Center" Margin="0,5,0,0"/>
                <Button Grid.Row="1" Grid.Column="2" x:Name="SelectVideoFolderButton" Content="..." Padding="10,3" Margin="5,5,0,0"
                        Click="SelectVideoFolderButton_Click" Width="40" Height="30"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="å¤‡ä»½ä½ç½®:" VerticalAlignment="Center" FontSize="12" Margin="0,5,0,0"/>
                <TextBox Grid.Row="2" Grid.Column="1" x:Name="VideoBackupTextBox" IsReadOnly="True" TextWrapping="Wrap"
                         Height="30" VerticalContentAlignment="Center" Margin="0,5,0,0" Text="{Binding VideoBackupPath, Mode=OneWay, TargetNullValue='å®‰è£…å‰å°†è‡ªåŠ¨å¤‡ä»½'}"/>
                <Button Grid.Row="2" Grid.Column="2" x:Name="OpenVideoBackupButton" Content="æ‰“å¼€æ–‡ä»¶å¤¹" Padding="8,3" Margin="5,5,0,0"
                        Click="OpenVideoBackupButton_Click" Height="30"/>
            </Grid>
        </StackPanel>

        <!-- Drag & Drop Area -->
        <GroupBox Grid.Row="2" Header="æ–‡ä»¶é€‰æ‹©" Margin="0,0,0,15">
            <Grid Margin="10">
                <Border x:Name="DropZoneBorder" BorderBrush="#CCCCCC" BorderThickness="2"
                        Background="#FAFAFA" CornerRadius="5" Padding="20" Height="80"
                        AllowDrop="True" Drop="DropZone_Drop" DragOver="DropZone_DragOver"
                        DragLeave="DropZone_DragLeave">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="ðŸ“ å°† ZIP æˆ– CFG/TXT æ–‡ä»¶æ‹–æ”¾åˆ°æ­¤å¤„" FontSize="14"
                                   HorizontalAlignment="Center" Foreground="#666666"/>
                        <TextBlock x:Name="SelectedFileTextBlock" Text="" FontSize="12"
                                   HorizontalAlignment="Center" Foreground="#0078D4" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </GroupBox>

        <!-- Log Output -->
        <GroupBox Grid.Row="3" Header="æ—¥å¿—è¾“å‡º">
            <RichTextBox x:Name="LogTextBox" IsReadOnly="True" VerticalScrollBarVisibility="Auto"
                     FontFamily="Consolas" FontSize="11" Background="#FAFAFA" BorderThickness="0" Padding="5"/>
        </GroupBox>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,15,0,0" HorizontalAlignment="Right" VerticalAlignment="Top">
            <Button x:Name="RefreshButton" Content="åˆ·æ–°è·¯å¾„" Click="RefreshButton_Click"
                    Margin="10,0,0,0" Background="#3b3b3b" Foreground="White" BorderBrush="#707070" Padding="20,5" Height="32" MinWidth="100" FontSize="14" VerticalAlignment="Center" VerticalContentAlignment="Center"/>
            <Button x:Name="BackupButton" Content="è¿›è¡Œå¤‡ä»½" Click="BackupButton_Click"
                    Margin="10,0,0,0" Background="#6B8E23" Foreground="White" BorderBrush="#556B2F" Padding="20,5" Height="32" MinWidth="100" FontSize="14" VerticalAlignment="Center" VerticalContentAlignment="Center"/>
            <Button x:Name="InstallButton" Content="å¼€å§‹å®‰è£…" Click="InstallButton_Click"
                    Margin="10,0,0,0" Background="#0078D4" Foreground="White" BorderBrush="#005A9E" Padding="20,5" Height="32" MinWidth="100" FontSize="14" VerticalAlignment="Center" VerticalContentAlignment="Center"/>
        </StackPanel>
    </Grid>
</Window>
